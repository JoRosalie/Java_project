image: maven:latest                                                                                                                         
stages:                                                                                                                                     
  - maven-build                                                                                                                             
  - docker-build                                                                                                                            
maven-build:                                                                                                                                
  stage: maven-build                                                                                                                        
  script:                                                                                                                                   
    - mvn package                                                                                                                           
    - ls -lah                                                                                                                               
  artifacts:                                                                                                                                
    paths:                                                                                                                                  
      - target/*.jar                                                                                                                        
docker-build:                                                                                                                               
  stage: docker-build                                                                                                                       
  image: docker:latest                                                                                                                      
  services:                                                                                                                                 
    - docker:dind                                                                                                                           
  script:  
    - registry.gitlab.com/johann.rosalie/java_project                                                                                                                          
   # - docker build -t testjava ./                                                                                                                     
  dependencies:                                                                                                                             
    - maven-build 
